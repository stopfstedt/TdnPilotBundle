
{% block method_definition %}
    public function testPost{{ entity }}()
{% endblock method_definition %}
    {
{% block method_body %}
        $this->createJsonRequest(
            'POST',
            $this->getUrl('post_{{ entity|lower|pluralize }}'),
            json_encode(
                $this->container->get('{{ dataloader_service_ns }}.{{ entity|lower }}')
                    ->create()
            )
        );

        $response = $this->client->getResponse();
        $headers  = [];

        foreach ($response->headers->all() as $hK => $hV) {
            $headers[(string) String::create($hK)->lower()] = $hV;
        }

        $this->assertEquals($response->getStatusCode(), Codes::HTTP_CREATED);
        $this->assertArrayHasKey('location', $headers, print_r($headers, true));
{% endblock method_body %}
    }
