<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Caveats - TdnPilotBundle</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> TdnPilotBundle</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
        <span>Installation</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../dependencies">Dependencies</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Caveats</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#directory-structure">Directory Structure</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#entity-gotchas">Entity Gotchas</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="..">Install</a>
                    
                </li>
            
        

    
        
        <span>Usage</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-project">Project command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-controller">Controller command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-form">Form command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-handler">Handler command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-manager">Manager command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-routing">Routing command</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../usage/generate-sonata">Sonata command</a>
                    
                </li>
            
        

    
        
        <span>Contributing</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../contributing">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../contributing/guidelines">Contribution Guidelines</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../contributing/test-checks">Tests & Checks</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../.."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    <li>Caveats</li>
    <li class="wy-breadcrumbs-aside"><a href="https://thedevnetwork.github.io/TdnPilotBundle/_static/api/index.html">API</a> |<a href="https://github.com/TheDevNetwork/TdnPilotBundle.git" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h2 id="directory-structure">Directory Structure</h2>
<p>Bundles following the <a href="http://symfony.com/doc/current/best_practices/index.html">symfony2 best practices</a> should already meet the expectations here.</p>
<p>The following namespace structure is expected for bundles:</p>
<ul>
<li>Controllers: <code>&lt;BundleNamespace&gt;\Controllers</code></li>
<li>Form Types: <code>&lt;BundleNamespace&gt;\Form\Type</code></li>
<li>Rest Handler: <code>&lt;BundleNamespace&gt;\Handler</code></li>
<li>Entities: <code>&lt;BundleNamespace&gt;\Entity</code></li>
<li>Entity Manager: <code>&lt;BundleNamespace&gt;\Entity\Manager</code></li>
</ul>
<p>Resource Directory:</p>
<ul>
<li>Bundle Config: <BundleRoot>/Resources/config`</li>
</ul>
<h2 id="entity-gotchas">Entity Gotchas</h2>
<p>To guarantee that this bundle will work, entities must follow these basic guidelines:</p>
<ul>
<li>Proper setters/getters</li>
<li>Proper docblock</li>
<li>Proper annotations (orm, odm, symfony constraints, etc)</li>
</ul>
<p>Type rules:</p>
<ul>
<li>Collections<ul>
<li>Should be annotated in docblocks <code>&lt;CollectionType&gt;|ObjectTypeInterface[]</code></li>
<li>As noted in the [doctrine documentation for removing associations] your entity setters might have to accept
null to properly remove a relationship, so having a remove method is redundant unless you're using public vars.
Remember, doctrine always looks at the owning side. Remove methods will not be tested, as we'll be using the
strategy outlined in the aforementioned documentation.</li>
</ul>
</li>
<li>Booleans<ul>
<li>Getters should be named: <code>is|has|should|may|supports&lt;VarName&gt;()</code></li>
</ul>
</li>
<li>Arrays<ul>
<li>should be annotated <code>array</code> or if possible to be more descriptive <code>&lt;type&gt;[]</code> (e.g.  <code>ObjectTypeInterface[]</code>)</li>
</ul>
</li>
<li>Everything else<ul>
<li>Setters should be named: <code>set&lt;VarName&gt;</code></li>
<li>Getters should be named: <code>get&lt;VarName&gt;</code></li>
<li>Should be annotated accordingly (e.g. <code>@param int $myInt</code>, <code>@return int</code>, etc)</li>
</ul>
</li>
</ul>
<p>Behavioral methods will not be tested but would be welcomed in a PR if even possible (through AST or otherwise).</p>
<p>If your object has service dependencies, it SHOULD be declared as a service. *
The entity service name SHOULD follow this convention: <code>&lt;bundle-name&gt;.entity.&lt;entity-name&gt;</code> *</p>
<p><code>*</code> Note: This is not currently needed but will be in the next versions of the bundle.</p>
<p>Most basic example below:</p>
<pre><code class="php">&lt;?php

namespace Foo\Bar\Entity;

use Doctrine\Common\Collections\Collection;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use JMS\Serializer\Annotation\ExclusionPolicy;
use JMS\Serializer\Annotation\Expose;
use JMS\Serializer\Annotation\Type;

/**
 * Class Abc
 * @package Foo\BarBundle\Entity
 *
 * @ORM\Table(name=&quot;abc&quot;)
 * @ORM\Entity
 *
 * @ExclusionPolicy(&quot;all&quot;)
 */
class Abc implements AbcInterface
{
    /**
     * @var int
     *
     * @ORM\Column(name=&quot;id&quot;, type=&quot;integer&quot;)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy=&quot;AUTO&quot;)
     *
     * @Assert\Type(type=&quot;integer&quot;)
     *
     * @Expose
     * @Type(&quot;integer&quot;)
     */
    protected $id;

    /**
     * @var string
     *
     * @ORM\Column(type=&quot;string&quot;, length=90)
     *
     * @Assert\NotBlank()
     * @Assert\Type(type=&quot;string&quot;)
     *
     * @Expose
     * @Type(&quot;string&quot;)
     */
    protected $foo;

    /**
     * @var bool
     *
     * @ORM\Column(name=&quot;bar&quot;, type=&quot;boolean&quot;)
     *
     * @Assert\NotNull()
     * @Assert\Type(type=&quot;bool&quot;)
     *
     * @Expose
     * @Type(&quot;boolean&quot;)
     */
    protected $bar;

    /**
     * @var XyzInterface
     *
     * @ORM\ManyToOne(targetEntity=&quot;Xyz&quot;, inversedBy=&quot;abcs&quot;)
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name=&quot;xyz_id&quot;, referencedColumnName=&quot;id&quot;)
     * })
     *
     * @Expose
     * @Type(&quot;Foo\BarBundle\Entity\Xyz&quot;)
     */
    protected $xyz;

    /**
     * @var ArrayCollection|ExtraInterface[]
     *
     * @ORM\ManyToMany(targetEntity=&quot;Extra&quot;, inversedBy=&quot;abcs&quot;)
     * @ORM\JoinTable(name=&quot;acbs_extras&quot;,
     *   joinColumns={
     *     @ORM\JoinColumn(name=&quot;abc_id&quot;, referencedColumnName=&quot;id&quot;)
     *   },
     *   inverseJoinColumns={
     *     @ORM\JoinColumn(name=&quot;extra_id&quot;, referencedColumnName=&quot;id&quot;)
     *   }
     * )
     *
     * @Expose
     * @Type(&quot;ArrayCollection&lt;Foo\BarBundle\Entity\Extra&gt;&quot;)
     */
    protected $extras;

    /**
     * @param int $id
     */
    public function setId($id)
    {
        $this-&gt;id = $id;
    }

    /**
     * @return int
     */
    public function getId()
    {
        return $this-&gt;id;
    }

    /**
     * @param string $foo
     */
    public function setFoo($foo)
    {
        $this-&gt;foo = $foo;
    }

    /**
     * @return string
     */
    public function getFoo()
    {
        return $this-&gt;foo;
    }

    /**
     * @param bool $bar
     */
    public function setBar($bar)
    {
        $this-&gt;bar = $bar;
    }

    /**
     * Alternatively: is|has|should|may|supports&lt;Bar&gt;()
     * @return bool
     */
    public function hasBar()
    {
        return $this-&gt;bar;
    }

    /**
     * @param XyzInterface|null $xyz
     */
    public function setXyz(XyzInterface $xyz = null)
    {
        $this-&gt;xyz = $xyz;
    }

    /**
     * @return XzyInterface
     */
    public function getXyz()
    {
        return $this-&gt;xyz;
    }

    /**
     * @param Collection $extras
     */
    public function setExtras(Collection $extras)
    {
        $this-&gt;extras = new ArrayCollection();
        foreach ($extras as $extra) {
            $this-&gt;addExtra($extra);
        }
    }

    /**
     * @param ExtraInterface $extra
     */
    public function addExtra(ExtraInterface $extra)
    {
        $this-&gt;extras-&gt;add($extra);
    }

    /**
     * @return ArrayCollection|ExtraInterface[]
     */
    public function getExtras()
    {
        return $this-&gt;extras;
    }
}

</code></pre>


            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href=".." class="btn btn-neutral float-right" title="Install"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dependencies" class="btn btn-neutral" title="Dependencies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <a href="https://github.com/TheDevNetwork/TdnPilotBundle.git" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
        
      <span><a href="../dependencies" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href=".." style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>